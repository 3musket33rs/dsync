<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: serialize.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: serialize.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>(function () {
  'use strict';

  /**
   * Function interface - Serializes objects to arrays of bytes.
   *
   * &lt;p>Any instance of &lt;code>T&lt;/code> must be accepted and have a non &lt;code>null&lt;/code> return value:
   * for any &lt;code>o&lt;/code>, &lt;code>o instanceof T&lt;/code> implies &lt;code>serialize(o) != null&lt;/code>.&lt;/p>
   *
   * &lt;p>The output must be consistent, an identical output should be returned if called twice on the equal
   * objects.&lt;/p>
   *
   * @external serialize
   * @function
   * @param {T} item - the item to serialize.
   * @return {external:ArrayBuffer} the serialized item.
   */
  /**
   * Function interface - Deserializes an array of bytes back to an object.
   *
   * &lt;p>Any array of bytes should lead to either a non &lt;code>null&lt;/code> value or throw.&lt;/p>
   *
   * &lt;p>The output must be consistent, an identical output should be returned if called twice
   * on the identical arrays.&lt;/p>
   *
   * @external deserialize
   * @function
   * @param {external:ArrayBuffer} content - the array of bytes representing an object.
   * @return {T} the object deserialized from the array of bytes.
   */

  var Buffer = require('buffer').Buffer;

  function identity(t) {
    return t;
  }
  function fromString(func) {
    func = func || identity;
    return function serialize(item) {
      var str = func(item);
      var buffer = new Buffer(str, 'utf-8');
      return new Uint8Array(buffer).buffer;
    };
  }

  function toString(func) {
    func = func || identity;
    return function serialize(buff) {
      var b = new Buffer(new Uint8Array(buff));
      var str = b.toString('utf-8');
      return func(str);
    };
  }

  /**
   * @module serialize
   */
  module.exports = {

    /**
     * Serializes string view of objects to bytes.
     *
     * @function
     * @param {Function} func - translates objects to string before serializing them, can be skipped if the item is already a string.
     * @return {serialize} a serializer function which converts objects to string and take the bytes out of the string.
     */
    fromString: fromString,

    /**
     * Deserializes objects from bytes to a string view.
     *
     * @function
     * @param {Function} func - retrieves an object corresponding to the input string view, can be skipped if target type is string.
     * @return {deserialize} a deserializer function which reads strings from byte arrays and converts them to objects.
     */
    toString: toString
  };
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-arrayBufferSerialization.html">arrayBufferSerialization</a></li><li><a href="module-bucketSelector.html">bucketSelector</a></li><li><a href="module-iterator.html">iterator</a></li><li><a href="module-mathsync.html">mathsync</a></li><li><a href="module-promise.html">promise</a></li><li><a href="module-resolver.html">resolver</a></li><li><a href="module-serialize.html">serialize</a></li><li><a href="module-summarizer.html">summarizer</a></li></ul><h3>Externals</h3><ul><li><a href="external-ArrayBuffer.html">ArrayBuffer</a></li><li><a href="external-Difference.html">Difference</a></li><li><a href="external-Generator.html">Generator</a></li><li><a href="external-Iterator.html">Iterator</a></li><li><a href="external-Promise.html">Promise</a></li><li><a href="external-Readable.html">Readable</a></li><li><a href="external-Summary.html">Summary</a></li></ul><h3>Events</h3><ul><li><a href="external-Readable.html#event:data">data</a></li><li><a href="external-Readable.html#event:end">end</a></li><li><a href="external-Readable.html#event:error">error</a></li></ul><h3>Global</h3><ul><li><a href="global.html#bucketSelector">bucketSelector</a></li><li><a href="global.html#deserialize">deserialize</a></li><li><a href="global.html#digester">digester</a></li><li><a href="global.html#resolver">resolver</a></li><li><a href="global.html#serialize">serialize</a></li><li><a href="global.html#summarizer">summarizer</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Mon Apr 07 2014 18:56:58 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
